<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Busca Saúde</title>
  <link rel="stylesheet" href="/front-end/src/styles/busca-saude.css" />
  <link rel="shortcut icon" href="/front-end/public/assets/images/favicon.png" type="image/x-icon" />

  <style>
    /* Estilo básico para visualização do mapa */
    #map {
      width: 100%;
      height: 500px;
    }
  </style>
</head>

<body>
  <header>
    <section class="fundo-header">
      <img src="/front-end/public/assets/images/busca-saude.png" alt="imagem do saúde conectada" />
      <a href="./index.html" class="botao-voltar">
        <img src="/front-end/public/assets/images/botao-voltar.png" alt="botão voltar" />
      </a>
    </section>
  </header>

  <main>
    <div id="map"></div>

    <script>
      let map;
      const locations = [
        {
          name: "Porto Digital",
          lat: -8.06311,
          lng: -34.874120,
          info: "Informações sobre o Porto Digital.",
          googleMapsUrl: "https://maps.google.com/?q=-8.06311,-34.874120",
        },
        {
          name: "Unit",
          lat: -8.118005,
          lng: -34.913418,
          info: "Detalhes da Unit.",
          googleMapsUrl: "https://maps.google.com/?q=-8.118005,-34.913418",
        },
        {
          name: "Meu Local",
          lat: -8.055,
          lng: -34.880,
          info: "Este é o meu local!",
          googleMapsUrl: "https://maps.google.com/?q=-8.055,-34.880",
        },
      ];

      async function initMap() {
        const { Map, InfoWindow } = await google.maps.importLibrary("maps");

        map = new Map(document.getElementById("map"), {
          center: { lat: -8.054, lng: -34.881 },
          zoom: 14,
        });

        const infoWindow = new InfoWindow();

        locations.forEach(({ name, lat, lng, info, googleMapsUrl }) => {
          const marker = new google.maps.Marker({
            position: { lat, lng },
            map,
            title: name,
          });

          marker.addListener("click", () => {
            const contentString = `
              <div>
                <strong>${name}</strong><br>
                ${info}<br>
                <a href="${googleMapsUrl}" target="_blank">Ver no Google Maps</a>
              </div>
            `;
            infoWindow.setContent(contentString);
            infoWindow.open(map, marker);
          });
        });
      }
    </script>

    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDaCKgXzMzsalNLDsa8dYgO64IGv4NqDGA&callback=initMap&libraries=places"
      async
      defer
    ></script>
  </main>

  <footer>
    <img src="/front-end/public/assets/images/background-footer.png" alt="imagem de fundo do rodapé" />
    <img class="imagem-footer-meio" src="/front-end/public/assets/images/Ativo 1@4x.png" alt="Logo MedSinal" />
  </footer>
</body>
</html>
